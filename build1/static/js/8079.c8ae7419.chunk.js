"use strict";(self.webpackChunkskinniweb=self.webpackChunkskinniweb||[]).push([[8079,6332,3899,9551,5058],{71285:(e,t,s)=>{s.r(t),s.d(t,{default:()=>h});var a=s(65043),o=s(68513),n=(s(12916),s(68090)),l=s(98136),r=s(73216),i=s(60482),u=s(86213),c=s(38696),d=s(83003),f=s(30064),p=s.n(f),g=s(70579);const h=()=>{const e=(0,d.d4)((e=>e.user)),t="",[s,f]=(0,a.useState)({page:1,count:10,search:""}),[h,v]=(0,a.useState)([]),[A,m]=(0,a.useState)(0),[w,y]=(0,a.useState)(!0),k=(0,r.Zp)(),C=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};y(!0);let t={...s,...e};o.A.get(c.default.listApi,t).then((e=>{e.success&&(v(e.data.map((e=>e))),m(e.total)),y(!1)}))},x=()=>{let e={startDate:"",endDate:"",platform:"",search:"",status:"",page:1,role:""};f({...s,...e}),C({...e})},B=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",s=null===e||void 0===e?void 0:e.permissions,a=null===s||void 0===s?void 0:s[t];return"admin"==e.role&&(a=!0),a};return(0,a.useEffect)((()=>{e&&e.loggedIn&&(f({...s,search:t}),C({search:t,page:1}))}),[]),(0,g.jsx)(g.Fragment,{children:(0,g.jsx)(l.default,{edit:e=>{k(`/${c.default.url}/edit/${e}`)},view:e=>{let t=`/${c.default.url}/detail/${e}`;k(t)},clear:x,sortClass:e=>{let t="fa-sort";return s.key==e&&"asc"==s.sorder?t="fa-sort-up":s.key==e&&"desc"==s.sorder&&(t="fa-sort-down"),"fa "+t},sorting:e=>{let t="asc";s.key==e&&(t="asc"==s.sorder?"desc":"asc");let a=`${e} ${t}`;f({...s,sortBy:a,key:e,sorder:t}),C({sortBy:a,key:e,sorder:t})},isAllow:B,count:e=>{f({...s,count:e}),C({...s,count:e})},pageChange:e=>{f({...s,page:e}),C({page:e})},deleteItem:e=>{p().fire({title:"Are you sure?",text:"Do you want to delete this",icon:"warning",showCancelButton:!0,confirmButtonColor:"#0065FF",cancelButtonColor:"#d33",confirmButtonText:"Yes"}).then((t=>{t.isConfirmed&&((0,n.A)(!0),o.A.delete(c.default.deleteApi,{id:e}).then((e=>{e.success&&x(),(0,n.A)(!1)})))}))},filters:s,setFilter:f,filter:function(){let e={page:1,...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}};f({...s,...e}),C({...e})},loaging:w,data:h,total:A,statusChange:e=>{if(!B(`edit${c.default.check}`))return;let t="active";"active"==e.status&&(t="deactive"),p().fire({title:"Are you sure?",text:`Do you want to ${"active"==t?"Activate":"Inactivate"} this user?`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#0065FF",cancelButtonColor:"#d33",confirmButtonText:"Yes"}).then((s=>{s.isConfirmed&&((0,n.A)(!0),o.A.put(c.default.statusApi,{id:e.id,status:t}).then((e=>{e.success&&C(),(0,n.A)(!1)})))}))},changestatus:e=>{f({...s,status:e,page:1}),C({status:e,page:1})},exportfun:async()=>{const t=null===e||void 0===e?void 0:e.access_token,s=await(0,u.A)({method:"get",url:`${i.A.api}api/export/excel`,responseType:"blob",body:{token:t}});var a=new Blob([s.data],{type:s.headers["content-type"]});const o=document.createElement("a");o.href=window.URL.createObjectURL(a),o.download=`${c.default.title}.xlsx`,o.click()},getRolesData:e=>{f({...s,role:e,page:1}),C({role:e,page:1})},uploadFile:e=>{let t=e.target.files,s=null===t||void 0===t?void 0:t.item(0);s&&((0,n.A)(!0),o.A.postFormFileData("user/import-users",{file:s}).then((e=>{e.success,(0,n.A)(!1)})))}})})}}}]);
//# sourceMappingURL=8079.c8ae7419.chunk.js.map