"use strict";(self.webpackChunkskinniweb=self.webpackChunkskinniweb||[]).push([[5186,6332,3899,9551,5058],{88560:(e,t,s)=>{s.r(t),s.d(t,{default:()=>g});var o=s(65043),a=s(68513),n=(s(17575),s(68090)),r=s(51661),l=s(73216),i=s(60482),u=s(86213),c=s(75115),d=s(83003),f=s(30064),p=s.n(f),h=s(70579);const g=()=>{const e=(0,d.d4)((e=>e.user)),t="",[s,f]=(0,o.useState)({page:1,count:10,search:""}),[g,v]=(0,o.useState)([]),[k,m]=(0,o.useState)(0),[A,w]=(0,o.useState)(!0),y=(0,l.Zp)(),C=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};w(!0);let t={...s,...e};a.A.get("",t).then((e=>{e.success&&(v(e.data.map((e=>e))),m(e.total)),w(!1)}))},b=()=>{let e={startDate:"",endDate:"",platform:"",search:"",status:"",page:1,role:""};f({...s,...e}),C({...e})},x=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",s=null===e||void 0===e?void 0:e.permissions,o=null===s||void 0===s?void 0:s[t];return"admin"==e.role&&(o=!0),o};return(0,o.useEffect)((()=>{e&&e.loggedIn&&(f({...s,search:t}),C({search:t,page:1}),(()=>{const t=e.connectionsDetails.filter((e=>"hubspot"===e.type)).map((e=>e.refreshToken)).pop();a.A.get("hubspot/access_token_using_refresh_token",{refresh_token:t}).then((e=>{}))})())}),[]),(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(r.default,{edit:e=>{y(`/${c.default.url}/edit/${e}`)},view:e=>{let t=`/${c.default.url}/detail/${e}`;y(t)},clear:b,sortClass:e=>{let t="fa-sort";return s.key==e&&"asc"==s.sorder?t="fa-sort-up":s.key==e&&"desc"==s.sorder&&(t="fa-sort-down"),"fa "+t},sorting:e=>{let t="asc";s.key==e&&(t="asc"==s.sorder?"desc":"asc");let o=`${e} ${t}`;f({...s,sortBy:o,key:e,sorder:t}),C({sortBy:o,key:e,sorder:t})},isAllow:x,count:e=>{f({...s,count:e}),C({...s,count:e})},pageChange:e=>{f({...s,page:e}),C({page:e})},deleteItem:e=>{p().fire({title:"Are you sure?",text:"Do you want to delete this",icon:"warning",showCancelButton:!0,confirmButtonColor:"#0065FF",cancelButtonColor:"#d33",confirmButtonText:"Yes"}).then((t=>{t.isConfirmed&&((0,n.A)(!0),a.A.delete(c.default.deleteApi,{id:e}).then((e=>{e.success&&b(),(0,n.A)(!1)})))}))},filters:s,setFilter:f,filter:function(){let e={page:1,...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}};f({...s,...e}),C({...e})},loaging:A,data:g,total:k,statusChange:e=>{if(!x(`edit${c.default.check}`))return;let t="active";"active"==e.status&&(t="deactive"),p().fire({title:"Are you sure?",text:`Do you want to ${"active"==t?"Activate":"Inactivate"} this user?`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#0065FF",cancelButtonColor:"#d33",confirmButtonText:"Yes"}).then((s=>{s.isConfirmed&&((0,n.A)(!0),a.A.put(c.default.statusApi,{id:e.id,status:t}).then((e=>{e.success&&C(),(0,n.A)(!1)})))}))},changestatus:e=>{f({...s,status:e,page:1}),C({status:e,page:1})},exportfun:async()=>{const t=null===e||void 0===e?void 0:e.access_token,s=await(0,u.A)({method:"get",url:`${i.A.api}api/export/excel`,responseType:"blob",body:{token:t}});var o=new Blob([s.data],{type:s.headers["content-type"]});const a=document.createElement("a");a.href=window.URL.createObjectURL(o),a.download=`${c.default.title}.xlsx`,a.click()},getRolesData:e=>{f({...s,role:e,page:1}),C({role:e,page:1})},uploadFile:e=>{let t=e.target.files,s=null===t||void 0===t?void 0:t.item(0);s&&((0,n.A)(!0),a.A.postFormFileData("user/import-users",{file:s}).then((e=>{e.success,(0,n.A)(!1)})))}})})}}}]);
//# sourceMappingURL=5186.ce230661.chunk.js.map