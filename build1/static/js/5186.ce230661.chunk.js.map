{"version":3,"file":"static/js/5186.ce230661.chunk.js","mappings":"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","sources":["Pages/CRM/index.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport ApiClient from \"../../methods/api/apiClient\";\nimport \"./style.scss\";\nimport loader from \"../../methods/loader\";\nimport Html from \"./html\";\nimport { useNavigate } from \"react-router-dom\";\nimport environment from \"../../environment\";\nimport axios from \"axios\";\nimport shared from \"./shared\";\nimport { useSelector } from \"react-redux\";\nimport Swal from \"sweetalert2\";\nconst HubSpot = () => {\n  const user = useSelector((state) => state.user);\n  const searchState = { data: \"\" };\n  const [filters, setFilter] = useState({ page: 1, count: 10, search: \"\" });\n  const [data, setData] = useState([]);\n  const [total, setTotal] = useState(0);\n  const [loaging, setLoader] = useState(true);\n  const history = useNavigate();\n\n  const sortClass = (key) => {\n    let cls = \"fa-sort\";\n    if (filters.key == key && filters.sorder == \"asc\") cls = \"fa-sort-up\";\n    else if (filters.key == key && filters.sorder == \"desc\")\n      cls = \"fa-sort-down\";\n    return \"fa \" + cls;\n  };\n\n  const sorting = (key) => {\n    let sorder = \"asc\";\n    if (filters.key == key) {\n      if (filters.sorder == \"asc\") {\n        sorder = \"desc\";\n      } else {\n        sorder = \"asc\";\n      }\n    }\n\n    let sortBy = `${key} ${sorder}`;\n    setFilter({ ...filters, sortBy, key, sorder });\n    getData({ sortBy, key, sorder });\n  };\n\n  const refreshToken = () => {\n    const refreshAccessToken = user.connectionsDetails.filter((item) => item.type === \"hubspot\").map((item) => item.refreshToken).pop();\n    ApiClient.get('hubspot/access_token_using_refresh_token',{refresh_token:refreshAccessToken}).then((res) => {\n    })\n  }\n  const getData = (p = {}) => {\n    setLoader(true);\n    let filter = { ...filters, \n      ...p,\n    };\n\n\n    ApiClient.get('', filter).then((res) => {\n      if (res.success) {\n        setData(\n          res.data\n            .map((itm) => {\n              return itm;\n            })\n        );\n\n        setTotal(res.total);\n      }\n      setLoader(false);\n    });\n  };\n\n  const clear = () => {\n    let f = {\n      startDate: \"\",\n      endDate: \"\",\n      platform: \"\",\n      search: \"\",\n      status: \"\",\n      page: 1,\n      role: \"\",\n    };\n    setFilter({ ...filters, ...f });\n    getData({ ...f });\n  };\n\n  const filter = (p = {}) => {\n    let f = {\n      page: 1,\n      ...p,\n    };\n    setFilter({ ...filters, ...f });\n    getData({ ...f });\n  };\n\n  const deleteItem = (id) => {\n    Swal.fire({\n      title: \"Are you sure?\",\n      text: `Do you want to delete this`,\n      icon: \"warning\",\n      showCancelButton: true,\n      confirmButtonColor: \"#0065FF\",\n      cancelButtonColor: \"#d33\",\n      confirmButtonText: \"Yes\",\n    }).then((result) => {\n      if (result.isConfirmed) {\n        loader(true);\n        ApiClient.delete(shared.deleteApi, { id: id }).then((res) => {\n          if (res.success) {\n            clear();\n          }\n          loader(false);\n        });\n      }\n    });\n  };\n\n  const pageChange = (e) => {\n    setFilter({ ...filters, page: e });\n    getData({ page: e });\n  };\n  const count = (e) => {\n    setFilter({ ...filters, count: e });\n    getData({ ...filters, count: e });\n  };\n  const changestatus = (e) => {\n    setFilter({ ...filters, status: e, page: 1 });\n    getData({ status: e, page: 1 });\n  };\n\n  const getRolesData = (id) => {\n    setFilter({ ...filters, role: id, page: 1 });\n    getData({ role: id, page: 1 });\n  };\n\n  const statusChange = (itm) => {\n    if (!isAllow(`edit${shared.check}`)) return;\n    let status = \"active\";\n    if (itm.status == \"active\") status = \"deactive\";\n\n    Swal.fire({\n      title: \"Are you sure?\",\n      text: `Do you want to ${\n        status == \"active\" ? \"Activate\" : \"Inactivate\"\n      } this user?`,\n      icon: \"warning\",\n      showCancelButton: true,\n      confirmButtonColor: \"#0065FF\",\n      cancelButtonColor: \"#d33\",\n      confirmButtonText: \"Yes\",\n    }).then((result) => {\n      if (result.isConfirmed) {\n        loader(true);\n        ApiClient.put(shared.statusApi, { id: itm.id, status }).then((res) => {\n          if (res.success) {\n            getData();\n          }\n          loader(false);\n        });\n      }\n    });\n  };\n\n  const edit = (id) => {\n    history(`/${shared.url}/edit/${id}`);\n  };\n\n  const view = (id) => {\n    let url = `/${shared.url}/detail/${id}`;\n    history(url);\n  };\n\n  const uploadFile = (e) => {\n    let files = e.target.files;\n    let file = files?.item(0);\n    let url = \"user/import-users\";\n    if (!file) return;\n    loader(true);\n    ApiClient.postFormFileData(url, { file }).then((res) => {\n      if (res.success) {\n      }\n      loader(false);\n    });\n  };\n\n  const exportfun = async () => {\n    const token =  user?.access_token;\n    const req = await axios({\n      method: \"get\",\n      url: `${environment.api}api/export/excel`,\n      responseType: \"blob\",\n      body: { token: token },\n    });\n    var blob = new Blob([req.data], {\n      type: req.headers[\"content-type\"],\n    });\n    const link = document.createElement(\"a\");\n    link.href = window.URL.createObjectURL(blob);\n    link.download = `${shared.title}.xlsx`;\n    link.click();\n  };\n\n  const isAllow = (key = \"\") => {\n    let permissions = user?.permissions;\n    let value = permissions?.[key];\n    if(user.role=='admin') value=true\n    return value;\n  };\n\n  useEffect(() => {\n    if (user && user.loggedIn) {\n      setFilter({ ...filters, search: searchState.data });\n      getData({ search: searchState.data, page: 1 });\n      refreshToken()\n    }\n  }, []);\n\n  return (\n    <>\n      <Html\n        edit={edit}\n        view={view}\n        clear={clear}\n        sortClass={sortClass}\n        sorting={sorting}\n        isAllow={isAllow}\n        count={count}\n        pageChange={pageChange}\n        deleteItem={deleteItem}\n        filters={filters}\n        setFilter={setFilter}\n        filter={filter}\n        loaging={loaging}\n        data={data}\n        total={total}\n        statusChange={statusChange}\n        changestatus={changestatus}\n        exportfun={exportfun}\n        getRolesData={getRolesData}\n        uploadFile={uploadFile}\n      />\n    </>\n  );\n};\n\nexport default HubSpot;\n"],"names":["HubSpot","user","useSelector","state","searchState","filters","setFilter","useState","page","count","search","data","setData","total","setTotal","loaging","setLoader","history","useNavigate","getData","p","arguments","length","undefined","filter","ApiClient","get","then","res","success","map","itm","clear","f","startDate","endDate","platform","status","role","isAllow","key","permissions","value","useEffect","loggedIn","refreshToken","refreshAccessToken","connectionsDetails","item","type","pop","refresh_token","_jsx","_Fragment","children","Html","edit","id","shared","url","view","sortClass","cls","sorder","sorting","sortBy","e","pageChange","deleteItem","Swal","title","text","icon","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","result","isConfirmed","loader","delete","deleteApi","statusChange","check","put","statusApi","changestatus","exportfun","async","token","access_token","req","axios","method","environment","api","responseType","body","blob","Blob","headers","link","document","createElement","href","window","URL","createObjectURL","download","click","getRolesData","uploadFile","files","target","file","postFormFileData"],"sourceRoot":""}