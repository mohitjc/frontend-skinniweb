"use strict";(self.webpackChunkskinniweb=self.webpackChunkskinniweb||[]).push([[6324,6332,3899,9551,5058],{91034:(e,t,a)=>{a.r(t),a.d(t,{default:()=>d});var n=a(65043),s=a(68513),i=(a(38379),a(68090)),o=a(86691),r=a(83003),l=a(70579);const d=()=>{var e,t;const a=(0,r.d4)((e=>e.user)),d=null===(e=a.connectionsDetails)||void 0===e||null===(t=e.find((e=>"timely"==e.type&&e.connected)))||void 0===t?void 0:t.refreshToken,[c,u]=(0,n.useState)({page:1,count:10,search:""}),[v,p]=(0,n.useState)([]),[y,f]=(0,n.useState)(0),[g,m]=(0,n.useState)(!1),[h,D]=(0,n.useState)(),[_,k]=(0,n.useState)([]),[A,S]=(0,n.useState)([]),T=function(){let e={account_id:null===h||void 0===h?void 0:h.id};e.eventType&&(e.event_type=e.eventType),e.sortBy&&(e.sort=e.sortBy.replace(" ",":")),e.startDate&&(e.min_start_time=new Date(e.startDate).toUTCString(),e.max_start_time=new Date(e.endDate).toUTCString()),(0,i.A)(!0);s.A.get("timely/getevents",e).then((e=>{null!==e&&void 0!==e&&e.success&&(p(e.data),function(){(0,i.A)(!0);let e={account_id:null===h||void 0===h?void 0:h.id};e.eventType&&(e.event_type=e.eventType),e.sortBy&&(e.sort=e.sortBy.replace(" ",":")),e.startDate&&(e.min_start_time=new Date(e.startDate).toUTCString(),e.max_start_time=new Date(e.endDate).toUTCString()),s.A.get("timely/getprojects",e).then((e=>{if(e){var t;const a=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.map((e=>null===e||void 0===e?void 0:e.length));S(e.data),f(a)}(0,i.A)(!1)}))}()),(0,i.A)(!1)}))};(0,n.useEffect)((()=>{d&&((0,i.A)(!0),s.A.get("timely/account/list").then((e=>{if((0,i.A)(!1),e.success){var t;let a=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t[0];D(a)}})))}),[d]);return(0,n.useEffect)((()=>{h&&(m(!0),s.A.get("timely/activities",{account_id:null===h||void 0===h?void 0:h.id}).then((e=>{if(e.success){let t=e.data.map((e=>({...e,name:e.entity.name})));k(t),T()}m(!1)})))}),[h]),(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(o.default,{eventTypes:_,me:h,clear:()=>{let e={startDate:"",endDate:"",platform:"",search:"",status:"",eventType:"",page:1,role:""};u({...c,...e}),T({...e})},sortClass:e=>{let t="fa-sort";return c.key==e&&"asc"==c.sorder?t="fa-sort-up":c.key==e&&"desc"==c.sorder&&(t="fa-sort-down"),"fa "+t},sorting:e=>{let t="asc";c.key==e&&(t="asc"==c.sorder?"desc":"asc");let a=`${e} ${t}`;u({...c,sortBy:a,key:e,sorder:t}),T({sortBy:a,key:e,sorder:t})},isAllow:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=null===a||void 0===a?void 0:a.permissions;return null===t||void 0===t?void 0:t[e]},count:e=>{u({...c,count:e}),T({...c,count:e})},pageChange:e=>{u({...c,page:e}),T({page:e})},filters:c,setFilter:u,filter:function(){let e={page:1,...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}};u({...c,...e}),T({...e})},loaging:g,data:v,total:y,projectData:A})})}}}]);
//# sourceMappingURL=6324.b6f59f4a.chunk.js.map